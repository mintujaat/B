<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - Blogify</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ===== Base ===== */
* {box-sizing: border-box; margin:0; padding:0;}
body {font-family:'Inter',sans-serif; background:#0f1724; color:#e6eef3;}

/* ===== Layout ===== */
.wrapper {display: flex; min-height: 100vh;}

/* ===== Sidebar ===== */
.sidebar {
  width: 220px;
  background: #1a1b2f;
  padding: 30px 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  transition: all 0.3s;
}
.sidebar h2 {color: #06b6d4; font-size: 1.6rem; margin-bottom: 20px; text-align: center;}
.sidebar a {text-decoration: none; color: #e6eef3; padding: 12px 10px; border-radius: 8px; transition: 0.2s all;}
.sidebar a:hover, .sidebar a.active {background: #06b6d4; color: #0f1724;}
.sidebar-toggle {display:none; cursor:pointer; font-size:1.5rem; text-align:center; margin-bottom:15px;}

/* ===== Main content ===== */
.main-content {flex: 1; padding: 30px 40px;}

/* ===== Section Titles ===== */
section h2 {
  color: #38bdf8;
  border-left: 4px solid #06b6d4;
  padding-left: 10px;
  margin-bottom: 15px;
  font-size: 1.4rem;
}

/* ===== Forms ===== */
form {
  display: flex;
  flex-direction: column;
  gap: 15px;
  background: #1a1b2f;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
}
input, textarea {
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #2c2d3c;
  background: #121224;
  color: #e6eef3;
  outline: none;
  transition: all 0.2s;
}
input:focus, textarea:focus {
  border-color: #06b6d4;
  box-shadow: 0 0 8px rgba(6,182,212,0.5);
}
button {
  padding: 10px 14px;
  border: none;
  border-radius: 6px;
  background: #06b6d4;
  color: #0f1724;
  font-weight: 600;
  cursor: pointer;
  transition: 0.3s all;
}
button:hover {background: #38bdf8; color: #0f1724;}

/* ===== Tables ===== */
table {
  width: 100%;
  margin-top: 20px;
  border-collapse: collapse;
  background: #1a1b2f;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
th, td {padding: 14px; border-bottom: 1px solid #2c2d3c; text-align: left;}
th {color: #38bdf8; background: #121224;}
tbody tr:hover {background: rgba(6,182,212,0.1);}
.recommended {cursor: pointer; font-size: 1.2rem; transition: 0.2s all;}
.recommended.active {color: #facc15;}

/* ===== Stats Cards ===== */
.stat-card {
  background:#1a1b2f;
  padding:20px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.4);
  text-align:center;
  transition:0.3s all;
}
.stat-card h3 {
  color:#38bdf8;
  font-size:1.1rem;
  margin-bottom:10px;
}
.stat-card p {
  font-size:1.6rem;
  font-weight:700;
  color:#e6eef3;
}
.stat-card:hover {transform:translateY(-5px);}

/* ===== Responsive ===== */
@media(max-width: 768px){
  .wrapper{flex-direction: column;}
  .sidebar{width:100%; flex-direction:row; justify-content:space-around; padding:15px; display:none;}
  .sidebar.active{display:flex; flex-wrap:wrap;}
  .sidebar h2{display:none;}
  .sidebar-toggle{display:block;}
  .main-content{padding:20px;}
}
</style>
</head>
<body>

<div class="wrapper">
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <h2>Blogify Admin</h2>
    <a href="#stats" class="active">Dashboard</a>
    <a href="#logo">Logo</a>
    <a href="#marquee">Marquee</a>
    <a href="#popup">Popup</a>
    <a href="#posts">Posts</a>
    <a href="#messages">Messages</a>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <span class="sidebar-toggle" id="sidebarToggle">â˜° Menu</span>

    <!-- ===== Stats Section ===== -->
    <section id="stats" style="margin-bottom:30px;">
      <h2>Dashboard Overview</h2>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:15px;">
        <div class="stat-card" id="totalPosts">
          <h3>Total Posts</h3>
          <p>0</p>
        </div>
        <div class="stat-card" id="totalMessages">
          <h3>Total Messages</h3>
          <p>0</p>
        </div>
        <div class="stat-card" id="unreadMessages">
          <h3>Unread Messages</h3>
          <p>0</p>
        </div>
      </div>
    </section>

    <!-- Logo Section -->
    <section id="logo" style="margin-top:30px;">
      <h2>Update Site Logo</h2>
      <form id="logoForm">
        <input type="text" id="logoInput" placeholder="Enter Logo URL">
        <button type="submit">Update Logo</button>
      </form>
    </section>

    <!-- Marquee Section -->
    <section id="marquee" style="margin-top:30px;">
      <h2>Update Site Marquee</h2>
      <form id="marqueeForm">
        <input type="text" id="marqueeInput" placeholder="Enter marquee text" required>
        <button type="submit">Update Marquee</button>
      </form>
    </section>

    <!-- Popup Section -->
    <section id="popup" style="margin-top:30px;">
      <h2>Update Popup Message</h2>
      <form id="popupForm">
        <textarea id="popupInput" rows="4" placeholder="Enter popup message"></textarea>
        <input type="text" id="popupImage" placeholder="Enter image URL (optional)">
        <button type="submit">Update Popup</button>
      </form>
    </section>

    <!-- Posts Section -->
    <section id="posts" style="margin-top:30px;">
      <h2>Add New Post</h2>
      <form id="postForm">
        <input type="text" id="title" placeholder="Post Title" required>
        <textarea id="content" rows="5" placeholder="Post Content" required></textarea>
        <input type="text" id="author" placeholder="Author Name" required>
        <input type="text" id="imageURL" placeholder="Image URL (optional)">
        <label><input type="checkbox" id="recommended"> Recommended Post</label>
        <button type="submit">Add Post</button>
      </form>

      <h2 style="margin-top:30px;">All Posts</h2>
      <table>
        <thead>
          <tr><th>Title</th><th>Author</th><th>Recommended</th><th>Actions</th></tr>
        </thead>
        <tbody id="postsTable"></tbody>
      </table>
    </section>

    <!-- Messages Section -->
    <section id="messages" style="margin-top:30px;">
      <h2>Messages</h2>
      <table>
        <thead>
          <tr>
            <th>Name</th><th>Email</th><th>Message</th><th>Status</th><th>Actions</th>
          </tr>
        </thead>
        <tbody id="messagesTable"></tbody>
      </table>
    </section>
  </div>
</div>

<!-- Firebase & JS -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, doc, deleteDoc, updateDoc, query, orderBy, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA7pGe0YS6HrscAjwjJefgr9tAKO__UZkU",
  authDomain: "blog-2f57c.firebaseapp.com",
  projectId: "blog-2f57c",
  storageBucket: "blog-2f57c.appspot.com",
  messagingSenderId: "608339540577",
  appId: "1:608339540577:web:cd5323ea45e3a4b4dc4820",
  measurementId: "G-JEPHSB73V3"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ===== Sidebar Toggle ===== */
const sidebar = document.getElementById("sidebar");
document.getElementById("sidebarToggle").addEventListener("click", ()=>{
  sidebar.classList.toggle("active");
});

/* ===== Load Logo ===== */
const logoForm = document.getElementById("logoForm");
const logoInput = document.getElementById("logoInput");
async function loadLogo(){
  const snap = await getDoc(doc(db,'settings','siteSettings'));
  if(snap.exists() && snap.data().logoURL){
    logoInput.value = snap.data().logoURL;
  }
}
loadLogo();
logoForm.addEventListener("submit", async e=>{
  e.preventDefault();
  await setDoc(doc(db,'settings','siteSettings'), {logoURL:logoInput.value},{merge:true});
  alert("Logo updated!");
});

/* ===== Marquee ===== */
const marqueeForm = document.getElementById('marqueeForm');
const marqueeInput = document.getElementById('marqueeInput');
async function loadMarquee() {
  const snap = await getDoc(doc(db,'settings','siteSettings'));
  if(snap.exists() && snap.data().marqueeText){
    marqueeInput.value = snap.data().marqueeText;
  }
}
loadMarquee();
marqueeForm.addEventListener('submit', async e => {
  e.preventDefault();
  await setDoc(doc(db,'settings','siteSettings'), {marqueeText: marqueeInput.value},{merge:true});
  alert("Marquee updated!");
});

/* ===== Popup ===== */
const popupForm = document.getElementById("popupForm");
const popupInput = document.getElementById("popupInput");
const popupImage = document.getElementById("popupImage");
async function loadPopup() {
  const snap = await getDoc(doc(db,"settings","popupMessage"));
  if(snap.exists()) {
    popupInput.value = snap.data().text || "";
    popupImage.value = snap.data().image || "";
  }
}
loadPopup();
popupForm.addEventListener("submit", async e=>{
  e.preventDefault();
  await setDoc(doc(db,"settings","popupMessage"),{
    text: popupInput.value,
    image: popupImage.value
  });
  alert("Popup message updated!");
});

/* ===== Posts ===== */
const postForm = document.getElementById('postForm');
const postsTable = document.getElementById('postsTable');
async function loadPosts() {
  postsTable.innerHTML = '';
  let count = 0;
  const postsSnapshot = await getDocs(query(collection(db,'blogs'), orderBy('createdAt','desc')));
  postsSnapshot.forEach(docSnap => {
    count++;
    const post = {...docSnap.data(), id: docSnap.id};
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${post.title}</td>
      <td>${post.authorName}</td>
      <td class="recommended ${post.recommended?'active':''}" data-id="${post.id}">${post.recommended?'â˜…':'â˜†'}</td>
      <td><button class="delete" data-id="${post.id}">Delete</button></td>
    `;
    postsTable.appendChild(tr);
  });
  document.querySelector("#totalPosts p").textContent = count;

  document.querySelectorAll('.recommended').forEach(el => {
    el.addEventListener('click', async () => {
      const postId = el.dataset.id;
      await updateDoc(doc(db,'blogs',postId),{recommended:!el.classList.contains('active')});
      loadPosts();
    });
  });
  document.querySelectorAll('.delete').forEach(el => {
    el.addEventListener('click', async () => {
      const postId = el.dataset.id;
      if(confirm('Delete this post?')){
        await deleteDoc(doc(db,'blogs',postId));
        loadPosts();
      }
    });
  });
}
postForm.addEventListener('submit', async e => {
  e.preventDefault();
  await addDoc(collection(db,'blogs'),{
    title:document.getElementById('title').value,
    content:document.getElementById('content').value,
    authorName:document.getElementById('author').value,
    imageURL:document.getElementById('imageURL').value,
    recommended:document.getElementById('recommended').checked,
    createdAt:new Date()
  });
  postForm.reset();
  loadPosts();
});
loadPosts();

/* ===== Messages ===== */
const messagesTable = document.getElementById("messagesTable");
async function loadMessages() {
  messagesTable.innerHTML = "";
  let total = 0, unread = 0;
  const snap = await getDocs(collection(db, "messages"));
  snap.forEach(docSnap => {
    total++;
    const data = docSnap.data();
    if(!data.read) unread++;
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${data.name}</td>
      <td>${data.email}</td>
      <td>${data.message}</td>
      <td>${data.read ? "Read" : "Unread"}</td>
      <td>
        <button class="markRead" data-id="${docSnap.id}">âœ” Read</button>
        <button class="deleteMsg" data-id="${docSnap.id}">ðŸ—‘ Delete</button>
      </td>
    `;
    messagesTable.appendChild(tr);
  });
  document.querySelector("#totalMessages p").textContent = total;
  document.querySelector("#unreadMessages p").textContent = unread;

  document.querySelectorAll(".markRead").forEach(btn=>{
    btn.addEventListener("click", async ()=>{
      const id = btn.dataset.id;
      await updateDoc(doc(db,"messages",id),{read:true});
      loadMessages();
    });
  });
  document.querySelectorAll(".deleteMsg").forEach(btn=>{
    btn.addEventListener("click", async ()=>{
      const id = btn.dataset.id;
      if(confirm("Delete this message?")){
        await deleteDoc(doc(db,"messages",id));
        loadMessages();
      }
    });
  });
}
loadMessages();
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Alerts - Blogify</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body {font-family:'Inter',sans-serif; background:#0f1724; color:#e6eef3; margin:0; padding:0;}
.container {max-width:1000px; margin:40px auto; padding:0 20px;}
h1 {color:#06b6d4; margin-bottom:20px; text-align:center;}
form {display:flex; flex-direction:column; gap:12px; background:#1a1b2f; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.4);}
input, textarea {padding:12px; border-radius:8px; border:1px solid #2c2d3c; background:#121224; color:#e6eef3; outline:none;}
input:focus, textarea:focus {border-color:#06b6d4; box-shadow:0 0 8px rgba(6,182,212,0.5);}
button {padding:10px; border:none; border-radius:6px; background:#06b6d4; color:#0f1724; font-weight:600; cursor:pointer; transition:0.3s;}
button:hover {background:#38bdf8; color:#0f1724;}
table {width:100%; margin-top:20px; border-collapse:collapse; background:#1a1b2f; border-radius:8px; overflow:hidden;}
th, td {padding:12px; border-bottom:1px solid #2c2d3c; text-align:left;}
th {color:#38bdf8; background:#121224;}
tbody tr:hover {background: rgba(6,182,212,0.1);}
@media(max-width:768px){
  table, tbody, th, td, tr {display:block;}
  th {display:none;}
  td {padding:10px 0; position:relative; padding-left:50%;}
  td::before {content:attr(data-label); position:absolute; left:10px; font-weight:600; color:#38bdf8;}
}
</style>
</head>
<body>

<div class="container">
  <h1>Admin Alerts Panel</h1>
  
  <form id="alertForm">
    <input type="text" id="alertTitle" placeholder="Alert Title" required>
    <textarea id="alertMessage" rows="3" placeholder="Alert Message" required></textarea>
    <button type="submit">Add Alert</button>
  </form>

  <h2 style="margin-top:30px; color:#38bdf8;">All Alerts</h2>
  <table>
    <thead>
      <tr>
        <th>Title</th>
        <th>Message</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="alertsTable"></tbody>
  </table>
</div>

<!-- Firebase JS -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, doc, deleteDoc, query, orderBy } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA7pGe0YS6HrscAjwjJefgr9tAKO__UZkU",
  authDomain: "blog-2f57c.firebaseapp.com",
  projectId: "blog-2f57c",
  storageBucket: "blog-2f57c.appspot.com",
  messagingSenderId: "608339540577",
  appId: "1:608339540577:web:cd5323ea45e3a4b4dc4820",
  measurementId: "G-JEPHSB73V3"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ===== Load Alerts ===== */
const alertForm = document.getElementById("alertForm");
const alertsTable = document.getElementById("alertsTable");

async function loadAlerts() {
  alertsTable.innerHTML = "";
  const q = query(collection(db, "alerts"), orderBy("createdAt","desc"));
  const snap = await getDocs(q);
  snap.forEach(docSnap => {
    const data = docSnap.data();
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td data-label="Title">${data.title}</td>
      <td data-label="Message">${data.message}</td>
      <td data-label="Actions">
        <button class="deleteBtn" data-id="${docSnap.id}">ðŸ—‘ Delete</button>
      </td>
    `;
    alertsTable.appendChild(tr);
  });

  // Delete buttons
  document.querySelectorAll(".deleteBtn").forEach(btn => {
    btn.addEventListener("click", async () => {
      const id = btn.dataset.id;
      if(confirm("Delete this alert?")) {
        await deleteDoc(doc(db,"alerts",id));
        loadAlerts();
      }
    });
  });
}
loadAlerts();

/* ===== Add New Alert ===== */
alertForm.addEventListener("submit", async e => {
  e.preventDefault();
  await addDoc(collection(db,"alerts"),{
    title: document.getElementById("alertTitle").value,
    message: document.getElementById("alertMessage").value,
    createdAt: new Date()
  });
  alertForm.reset();
  loadAlerts();
});
</script>
</body>
</html>

