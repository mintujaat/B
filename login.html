<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login / Sign Up - Blogify</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  body {margin:0; padding:0; font-family:'Inter',sans-serif; background:#0f1724; color:#e6eef3; display:flex; justify-content:center; align-items:center; height:100vh;}
  .container {background:#081021; padding:40px 32px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.5); width:360px; text-align:center; transition:0.3s;}
  h2 {margin-bottom:24px; color:#06b6d4;}
  input {width:100%; padding:12px 16px; margin:10px 0; border-radius:8px; border:none; background:#0f1724; color:#e6eef3; font-size:14px; outline:none;}
  button {width:100%; padding:12px; background:#06b6d4; border:none; border-radius:8px; color:#0f1724; font-weight:600; font-size:16px; cursor:pointer; transition:0.3s; margin-top:8px;}
  button:hover {background:#0ea5e9;}
  .error {color:#f87171; margin-top:12px; font-size:14px;}
  .footer {margin-top:16px; font-size:12px; color:#98a0b3;}
  .footer a {color:#06b6d4; text-decoration:none;}
  .footer a:hover {color:#0ea5e9;}
  .toggle-btn {margin-top:12px; font-size:14px; cursor:pointer; color:#06b6d4; display:inline-block;}
  .toggle-btn:hover {color:#0ea5e9;}
  .hidden {display:none;}
</style>
</head>
<body>

<div class="container">
  <h2 id="formTitle">Admin Login</h2>
  <input type="text" id="name" placeholder="Full Name" class="hidden">
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button id="actionBtn">Login</button>
  <div class="error" id="error-msg"></div>
  <div class="toggle-btn" id="toggleBtn">Don't have an account? Sign Up</div>
  <div class="footer">
    <p>Â© <span id="year"></span> Blogify</p>
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, updateProfile } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";

  document.getElementById('year').innerText = new Date().getFullYear();

  // --- Firebase Config ---
  const firebaseConfig = {
    apiKey: "AIzaSyA7pGe0YS6HrscAjwjJefgr9tAKO__UZkU",
    authDomain: "blog-2f57c.firebaseapp.com",
    projectId: "blog-2f57c",
    storageBucket: "blog-2f57c.appspot.com",
    messagingSenderId: "608339540577",
    appId: "1:608339540577:web:cd5323ea45e3a4b4dc4820",
    measurementId: "G-JEPHSB73V3"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // --- DOM Elements ---
  const nameInput = document.getElementById('name');
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const errorMsg = document.getElementById('error-msg');
  const formTitle = document.getElementById('formTitle');
  const actionBtn = document.getElementById('actionBtn');
  const toggleBtn = document.getElementById('toggleBtn');

  let isLogin = true;

  // Toggle Login/Sign Up
  toggleBtn.addEventListener('click', () => {
    isLogin = !isLogin;
    if(isLogin){
      formTitle.innerText = 'Admin Login';
      actionBtn.innerText = 'Login';
      toggleBtn.innerText = "Don't have an account? Sign Up";
      nameInput.classList.add('hidden');
      errorMsg.innerText = '';
    } else {
      formTitle.innerText = 'Admin Sign Up';
      actionBtn.innerText = 'Sign Up';
      toggleBtn.innerText = 'Already have an account? Login';
      nameInput.classList.remove('hidden');
      errorMsg.innerText = '';
    }
  });

  // Handle Login / Sign Up
  actionBtn.addEventListener('click', () => {
    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();
    const name = nameInput.value.trim();
    errorMsg.innerText = '';

    if(!email){ errorMsg.innerText = 'Email is required'; return; }
    if(!password){ errorMsg.innerText = 'Password is required'; return; }

    if(isLogin){
      // --- Login ---
      signInWithEmailAndPassword(auth, email, password)
        .then(() => { window.location.href = 'admin-dashboard.html'; })
        .catch(err => { errorMsg.innerText = err.message; });
    } else {
      // --- Sign Up ---
      if(!name){ errorMsg.innerText = 'Name is required'; return; }
      createUserWithEmailAndPassword(auth, email, password)
        .then(userCredential => {
          updateProfile(userCredential.user, { displayName: name })
            .then(() => {
              alert('Registration successful! Please login.');
              isLogin = true;
              formTitle.innerText = 'Admin Login';
              actionBtn.innerText = 'Login';
              toggleBtn.innerText = "Don't have an account? Sign Up";
              nameInput.classList.add('hidden');
              emailInput.value = '';
              passwordInput.value = '';
              errorMsg.innerText = '';
            });
        })
        .catch(err => { errorMsg.innerText = err.message; });
    }
  });
</script>

</body>
</html>
